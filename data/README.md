# README – Data Folder

## Overview
This `data/` directory contains all datasets used in the IPTp regimen analysis—both the original raw files and the cleaned/processed versions. It also includes a codebook and any intermediate RDS files saved during processing.

## Data Sources
We used the following source files:

1. **PROMO Trial Data (raw)**  
   ‑`raw-data/PROMO_Data.csv`  
   Original, unedited trial data as provided by the study investigators.

2. **PROMO Cleaned Data**  
   ‑`clean/PROMO_Data_clean.csv`  
   The cleaned and recoded dataset used for all primary analyses.

3. **Codebook**  
   ‑`clean/PROMOTE_Codebook.xlsx`  
   Variable definitions, labels, data types, and missingness for the cleaned dataset.

4. **Processed Data**  
   ‑`processed-data/processeddata.rds`  
   R‐serialized object containing the final analysis dataset (all variables cast to appropriate types, engineered features added).

## Folder Structure




data/
├── raw-data/
│ └── PROMO_Data.csv
│ # Raw trial dataset (UTF‐8 CSV) from the study database.
│
├── clean/
│ ├── PROMO_Data_clean.csv
│ │ # Fully cleaned and harmonized CSV for analysis.
│ └── PROMOTE_Codebook.xlsx
│ # Excel workbook with variable names, descriptions, types, and missingness.
│
└── processed-data/
└── processeddata.rds
# RDS file of the final analysis data frame, ready for modeling.













## Raw Data
- **`raw-data/PROMO_Data.csv`**  
  Original input spreadsheet with no recoding, nulls as reported by site.

## Processed Data
These RDS files were generated by the scripts in `code/processing-code/`:

- **`processed-data/processeddata.rds`**  
  - Contains the cleaned trial dataset with:
    - Date fields parsed as `Date`
    - Categorical variables cast as `factor`
    - Engineered features (e.g. `enroll_month`, `episodes_per_trimester`)
    - Composite outcome flags (e.g. `adverse_birth_outcome`)
  - Saved with `saveRDS(..., version = 2)` to preserve classes for downstream analyses.

See the individual RMarkdown scripts in **`code/processing-code/`** for full details on each transformation step.

## Codebook
- **`clean/PROMOTE_Codebook.xlsx`**  
  - Sheet listing each variable, its label, data type, allowed values, and percent missing.
  - This serves as the primary data dictionary for both raw and cleaned datasets.

## How to Reproduce
1. Run the scripts in `code/processing-code/` in the following order:
   - `01_clean_data.Rmd` → writes `clean/PROMO_Data_clean.csv`
   - `02_codebook.Rmd`    → writes `clean/PROMOTE_Codebook.xlsx`
   - `03_save_processed.Rmd` → writes `processed-data/processeddata.rds`
2. Inspect the `codebook` Excel file for variable definitions.
3. Load the RDS in R as:
   ```r
   df <- readRDS("data/processed-data/processeddata.rds")






